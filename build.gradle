plugins {
	id 'java'
	id 'application'
	id 'edu.sc.seis.launch4j' version '1.6.1'
}

defaultTasks 'build'
sourceCompatibility = '1.8'
targetCompatibility = '1.8'

mainClassName = 'jbyoshi.gradlegrab.GradleGrab'

launch4j {
	mainClassName = project.mainClassName
	outfile = 'gradle.exe'
	headerType = 'console'
	chdir = ''
}
assemble.dependsOn 'launch4j'

task testRun(type: JavaExec) {
	dependsOn jar
	classpath = sourceSets.main.runtimeClasspath
	main = project.mainClassName
	args 'dummyTaskForTest'
	workingDir project.projectDir
	standardOutput = new ByteArrayOutputStream()
}
check.dependsOn testRun
task dummyTaskForTest {}